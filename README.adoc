= Microservice 外部依赖

使用 Docker 搭建开发环境的外部依赖

== 组件

=== MySQL

通过在 `./docker/config/mysql/init.sql` 文件中增加相关 SQL 即可给不同的组件配置不同的数据库、账户和密码。

TIP: 该构建上下文是当前目录。所以，在 `./docker/images/mysql.dockerfile` 中添加文件时，填写的是当前目录的相对路径。

=== NACOS

Nacos /nɑ:kəʊs/ 是 Dynamic Naming and Configuration Service的首字母简称，一个更易于构建云原生应用的动态服务发现、配置管理和服务管理平台。

. 在 `./docker/config/mysql/init.sql` 文件中增加初始化数据库、账户和密码的 SQL 语句。
. 添加数据库初始化脚本 `./docker/config/nacos/mysql-schema.sql` 到 `docker/images/mysql.dockerfile` 中。
. 添加必要的环境变量配置文件 `./docker/env/nacos.env`。

=== Prometheus

添加新的组件，需要在 `./docker/config/prometheus/prometheus.yml` 中增加任务配置。

== 常用命令

. `docker exec -it nacos /bin/bash`

== 参考资料

. https://github.com/nacos-group/nacos-docker/tree/master[nacos-group/nacos-docker^] -- example/standalone-mysql-5.7.yaml
. https://dev.mysql.com/doc/refman/8.4/en/charset-mysql.html[Character Sets and Collations in MySQL 8.4^]
. https://www.cnblogs.com/sparkdev/p/9573248.html[Dockerfile 中的 COPY 与 ADD 命令^]
. https://blog.csdn.net/wmq880204/article/details/80591096[创建MySQL用户 赋予某指定库表的权限_grant all privileges on 指定表权限^]
. https://blog.csdn.net/u014796999/article/details/53559747[mysql刷新权限命令_sql给guest用户设置查询、更新权限^]
. https://nacos.io/en-us/docs/v2/guide/admin/monitor-guide.html[Nacos monitor guide^]
. https://blog.csdn.net/qq_32605245/article/details/134545714[最全docker之docker-compose.yml详解_docker-compose.yml^]
. https://www.cnblogs.com/johnnyzen/p/17785405.html[Docker Compose 基础教程（概念/基础操作）^]



